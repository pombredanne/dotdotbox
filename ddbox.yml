---
 - hosts: local

#   vars_files:
#     - vars.yml
   gather_facts: false
   sudo: true

   roles:
   - common
   - java
   - fonts

   tasks:

   - name: Update system package repos and upgrade
     apt: update_cache=yes upgrade=safe
     tags: upgrade

   - name: Install package management
     apt: update_cache=no pkg="python-software-properties,aptitude" state=installed force=yes
     ignore_errors: yes
     tags: upgrade

   - name: Add ppa repos
     apt_repository: repo=${item}
     with_items: ${system_ppa}
     tags: upgrade

   - name: Update system package repos and upgrade
     apt: update_cache=yes upgrade=safe
     tags: upgrade

   - name: Install required system packages.
     apt: pkg=${item} state=installed install_recommends=no force=yes
     with_items: ${system_packages}
     tags: upgrade

   - name: Remove unneccessary packages.
     apt: pkg=${item} state=absent purge=yes force=yes
     with_items: ${system_purge}
     tags: upgrade

   - name: add docker repo key
     apt_key: id=A88D21E9 url=https://get.docker.io/gpg

   - name: Add Docker repo
     apt_repository: repo='deb http://get.docker.io/ubuntu docker main'

